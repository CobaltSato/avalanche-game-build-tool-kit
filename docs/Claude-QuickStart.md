# Claude Code 実践ワーク

> **Anthropic x Forum Ventures ハッカソン優勝者の設定集を体験する**

このプロジェクトには [everything-claude-code](https://github.com/affaan-m/everything-claude-code) のベストプラクティスが組み込まれています。
11のワークを通じて、その威力を体験しましょう。

> 各機能の詳しい説明は [Guide.md](./Guide.md) を参照してください。

---

## 全体マップ

```
  ┌───────────────────────────────────────────────────────────────────┐
  │                     11ワークの全体像                                │
  │                                                                   │
  │   基本ワーク（1-7）                                                │
  │   ─────────────────────────────────────────────────               │
  │                                                                   │
  │   Work 1          Work 2           Work 3                         │
  │   ┌──────┐       ┌──────┐        ┌──────┐                        │
  │   │/plan │ ────→ │/tdd  │ ─────→ │/code │                        │
  │   │計画  │       │テスト │        │review│                        │
  │   └──────┘       └──────┘        └──────┘                        │
  │       コマンド       TDD           レビュー                        │
  │                                                                   │
  │   Work 4                    Work 5           Work 6               │
  │   ┌──────────────┐        ┌──────┐         ┌──────┐              │
  │   │ Playwright   │        │ MCP  │         │Contxt│              │
  │   │  + TDD       │        │ブラウザ│         │  7   │              │
  │   │ (E2E実装)    │        │ 操作  │         │ 検索 │              │
  │   └──────────────┘        └──────┘         └──────┘              │
  │       ★ 真髄                MCP               MCP                │
  │                                                                   │
  │   Work 7                                                          │
  │   ┌──────────────┐                                                │
  │   │エージェント   │                                                │
  │   │ 直接呼出し   │                                                │
  │   └──────────────┘                                                │
  │                                                                   │
  │   追加ワーク（8-11）                                               │
  │   ─────────────────────────────────────────────────               │
  │                                                                   │
  │   Work 8         Work 9          Work 10         Work 11          │
  │   ┌──────┐      ┌──────┐       ┌──────┐        ┌──────┐         │
  │   │ルール │      │フック │       │コンテ│        │その他 │         │
  │   │ 確認 │      │ 確認 │       │キスト│        │コマンド│         │
  │   └──────┘      └──────┘       └──────┘        └──────┘         │
  │    自動適用       自動実行       モード切替     応用コマンド        │
  │                                                                   │
  └───────────────────────────────────────────────────────────────────┘
```

### 6つの設定カテゴリ

```
  カテゴリ              場所                         公式定義
  ──────────────      ───────────────────────      ──────────────────
  commands/           .claude/commands/            user-invoked actions（明示的に呼ぶ）
  agents/             .claude/agents/              complex multi-step processes（専門処理）
  skills/             .claude/skills/              auto-triggered behaviors（自動発動）
  rules/              .claude/rules/               常に従うルール
  hooks               .claude/settings.local.json  イベント駆動の自動チェック
  MCP                 .mcp.json                    外部サービス連携
```

---

## Work 1: スラッシュコマンドを体験する

**目的**: `/plan` コマンドで実装計画を作成する

```
  あなたの入力                    裏で起きること
  ──────────────────            ──────────────────────
  /plan カウンターに            コマンド（plan.md）
    リセットボタンを        ──→   │
    追加したい                    ▼
                              planner エージェントが起動
                                 │
                                 ▼
                              実装計画を作成
                              ・変更ファイルの特定
                              ・実装手順
                              ・注意点・リスク
                                 │
                                 ▼
                              承認を求められる
```

### やること

```
/plan カウンターコンポーネントにリセットボタンを追加したい
```

### 確認ポイント

- [ ] 計画が step-by-step で示されたか
- [ ] 変更対象のファイルが特定されたか
- [ ] 実装に移る前に承認を求められたか

> `/plan` は**コードを書く前に考える**ことを強制します。いきなり実装するより手戻りが少なくなります。

### 豆知識: /plan で動くのはエージェント？スキル？

`/plan` コマンドは **planner エージェント**を起動します。
「plan スキル」は存在しません。コマンドとエージェントの2段構成です。

```
  /plan
    └─→ コマンド (commands/plan.md)
          └─→ planner エージェント (agents/planner.md)  ← これが動く
                └─→ plan スキル → 存在しない！
```

すべてのコマンドがスキルを持つわけではありません。
コマンドとスキルの違いが気になったら [Guide.md の解説](./Guide.md#plan-を打つとスキルが動くのエージェントが動くの) を参照してください。

---

## Work 2: TDD（テスト駆動開発）を体験する

**目的**: `/tdd` コマンドで RED → GREEN → REFACTOR サイクルを体験する

```
  /tdd doubleNumber を作成したい

       ┌───────────┐   最小限の   ┌───────────┐
       │  ① RED    │    実装      │  ② GREEN  │
       │ テストを書く│ ─────────→  │ テストを通す│
       │ （失敗する）│             │ （成功する）│
       └───────────┘             └─────┬─────┘
                                       │
                                 コード改善
                                       │
                                 ┌─────▼─────┐
                                 │③ REFACTOR │
                                 │ 改善する    │
                                 └───────────┘
```

### やること

```
/tdd 数値を2倍にする関数 doubleNumber を作成したい
```

### 確認ポイント

- [ ] テストが**先に**書かれたか（RED）
- [ ] テストが最初は**失敗した**か
- [ ] 実装後にテストが**通った**か（GREEN）
- [ ] カバレッジ80%以上を目指す説明があったか

> TDD は everything-claude-code の中心的なワークフローです。テストを先に書くことで、バグの早期発見とリファクタリングの安全性を確保します。

### 豆知識: /tdd では3つ全部が動く

`/plan` と違い、`/tdd` は**コマンド・エージェント・スキルの3つ全部**が関わります。

```
  /tdd
    └─→ コマンド (commands/tdd.md)          ← 「TDDでやれ」という指示書
          └─→ tdd-guide エージェント         ← 実際にテストを書く専門家
                └─→ tdd-workflow スキル      ← テストの書き方・パターン集を参照
```

公式定義（everything-claude-code）によると：
> "Commands are essentially skills executed via slash commands"
> （コマンドは本質的に、スラッシュで実行されるスキル）

つまり中身は似ていますが、**呼び出し方**が違います：

```
  コマンド = user-invoked actions     あなたが /tdd と明示的に呼ぶ
  スキル   = auto-triggered behaviors  Claude が自動で参照する（呼ぶ必要なし）
```

---

## Work 3: コードレビューを体験する

**目的**: `/code-review` でコード品質をチェックする

```
  /code-review app/page.tsx をレビューして

  code-reviewer エージェントが起動
       │
       ├─→ security-review スキルを参照
       │     OWASP Top 10 チェック
       │
       ├─→ coding-standards スキルを参照
       │     コーディング規約チェック
       │
       └─→ 重要度順にレポート
             CRITICAL > HIGH > MEDIUM > LOW
```

### やること

```
/code-review app/page.tsx をレビューして
```

または Work 2 で作成したコードをレビュー：

```
/code-review 今作成したコードをレビューして
```

### 確認ポイント

- [ ] セキュリティの観点でチェックされたか
- [ ] 問題点が重要度順に並んでいるか
- [ ] 修正案も提示されたか

> `.claude/rules/security.md` のルールにより、**コミット前の必須チェック**が自動化されます。

---

## Work 4: Playwright + TDD で UI 機能を実装する

> これが **everything-claude-code の真髄** です。
> ブラウザテストを先に書き、UI を実装し、テストが通ることを確認します。

```
  ★ Work 4 の流れ（Playwright E2E + TDD）

  Step 1: /plan で計画
       │
       ▼
  Step 2: Playwright E2E テストで TDD 実装

       ┌──────────────────────────────────────────┐
       │                                          │
       │  ① RED:   E2E テストを書く（失敗する）     │
       │     tests/counter.spec.ts に追加          │
       │     → +10 ボタンはまだないので失敗         │
       │                │                         │
       │                ▼                         │
       │  ② GREEN: +10 ボタンを実装する            │
       │     Counter.tsx にボタン追加               │
       │     → テストが通る！                      │
       │                │                         │
       │                ▼                         │
       │  ③ REFACTOR: コードを整理                 │
       │     セレクタの厳密化等                     │
       │                                          │
       └──────────────────────────────────────────┘
```

### 前提条件

```bash
npm run dev   # 開発サーバーを起動しておく
```

### やること

#### Step 1: 計画を立てる

```
/plan カウンターコンポーネントに +10 ボタンを追加したい
```

計画が表示されたら `yes` で承認。

#### Step 2: Playwright E2E テストで TDD 実装を依頼

```
Playwright E2E テストを使った TDD で実装して。
テストを先に書いて、失敗を確認してから実装してください。
```

### 確認ポイント

- [ ] **テストが先に書かれた**か（RED）
- [ ] テストが最初は**失敗した**か
- [ ] 実装後にテストが**通った**か（GREEN）
- [ ] `npx playwright test` で全テスト PASS したか

### テスト実行

```bash
npx playwright test tests/counter.spec.ts --reporter=list
```

> Playwright E2E + TDD の組み合わせで、UI の品質を保証します。テストが先にあることで「何を作るべきか」が明確になります。

---

## Work 5: Playwright MCP でブラウザを直接操作する

**目的**: MCP（外部サービス連携）の威力を体験する

```
  あなたの指示                  Playwright MCP の動き
  ──────────────────          ──────────────────────
  「localhost:3000 を          ① ブラウザを起動
   開いて +10 を3回       ──→  ② browser_snapshot で要素取得
   クリックして 30 に          ③ browser_click で +10 をクリック x3
   なることを確認」            ④ 値が 30 か確認して報告
```

### やること

```
localhost:3000 を開いて、+10 ボタンを3回クリックして、値が 30 になることをブラウザ上で確認して
```

### 確認ポイント

- [ ] ブラウザが自動で起動したか
- [ ] ボタンが正しくクリックされたか
- [ ] カウンターの値が 30 になったか

### 発展

```
localhost:3000 でカウンターを操作して、コンソールエラーがないか確認して
```

> Playwright MCP により、Claude がブラウザを直接操作してテスト・デバッグ・動作確認ができます。

---

## Work 6: Context7 で最新ドキュメントを検索する

**目的**: AI の知識が古くても最新情報を取得できることを体験する

```
  あなたの指示                  Context7 MCP の動き
  ──────────────────          ──────────────────────────
  「ethers.js v6 で            ① resolve-library-id
   コントラクトを           ──→     ライブラリ ID を取得
   呼び出す方法を              ② query-docs
   Context7 で調べて」             最新ドキュメントを取得
                               ③ コード例を含む回答を提供
```

### やること

```
ethers.js v6 でコントラクトを呼び出す方法を、Context7 で調べて教えて
```

または：

```
Next.js の Server Actions の書き方を Context7 で調べて
```

### 確認ポイント

- [ ] ライブラリ ID が解決されたか（例: `/ethers-io/ethers.js`）
- [ ] 最新のドキュメントが取得されたか
- [ ] コード例が含まれていたか

> AI の学習データは古くなりがちですが、Context7 で**最新情報をリアルタイムに取得**できます。

---

## Work 7: エージェントを直接呼び出す

**目的**: 9つの専門エージェントの使い分けを体験する

```
  ┌─ 企画 ──────────────────────────────────────┐
  │  planner ··········· 実装計画の作成           │
  │  architect ········· システム設計             │
  ├─ 開発 ──────────────────────────────────────┤
  │  tdd-guide ········· テスト駆動開発           │
  │  build-error-resolver  ビルドエラー解決       │
  ├─ 品質 ──────────────────────────────────────┤
  │  code-reviewer ····· コード品質レビュー        │
  │  security-reviewer · セキュリティ脆弱性分析    │
  │  e2e-runner ········ E2E テスト生成・実行      │
  ├─ 保守 ──────────────────────────────────────┤
  │  refactor-cleaner ·· 不要コード削除           │
  │  doc-updater ······· ドキュメント更新          │
  └─────────────────────────────────────────────┘
```

### やること

```
security-reviewer エージェントで packages/avalanche-wallet のセキュリティをチェックして
```

または：

```
architect エージェントでこのプロジェクトのアーキテクチャを説明して
```

### 確認ポイント

- [ ] 指定したエージェントが呼び出されたか
- [ ] エージェントの専門性が発揮されたか

> 各エージェントは**必要最小限のツールだけ**を持っています（5個程度）。50個のツールを持つ汎用エージェントより**高速で正確**です。

---

## Work 8: ルールの動作を確認する

**目的**: `.claude/rules/` のルールが自動適用されることを体験する

```
  あなた: 「APIキーをハードコードして」

  Claude の動作:
  ┌─────────────────────────────────────────────────┐
  │  security.md ルールが発動！                       │
  │                                                  │
  │  ✗ const apiKey = "sk-xxxxx"      ← 拒否される  │
  │  ✓ const apiKey = process.env.API_KEY  ← 提案   │
  └─────────────────────────────────────────────────┘
```

### やること

```
APIキーをハードコードしたコードを書いて
```

または：

```
console.log を残したコードを書いて
```

### 確認ポイント

- [ ] シークレットのハードコードが拒否されたか
- [ ] `process.env` を使うように提案されたか
- [ ] `console.log` が検出されて警告が表示されたか

> ルールは**常に自動適用**されます。人間が忘れがちなセキュリティチェックを自動化します。

---

## Work 9: フックの動作を確認する

**目的**: フックの自動実行を体験する

```
  ファイル編集
       │
       ▼
  PostToolUse フックが発動
       │
       ├── console.log 検出
       │     → "WARNING: console.log found"
       │
       └── TypeScript 型チェック
             → エラーがあれば表示
```

### やること

#### Step 1: console.log の検出

```
app/utils/helper.ts に console.log を含む関数を追加して
```

**期待**: 編集後に `[Hook] WARNING: console.log found` が表示される

#### Step 2: TypeScript の型チェック

```
app/utils/helper.ts に型エラーを含む関数を追加して
```

**期待**: 編集後に TypeScript のエラーが表示される

### 確認ポイント

- [ ] `console.log` が検出されて警告が表示されたか
- [ ] TypeScript の型チェックが自動実行されたか

> フックにより、**本番環境へのデバッグコード混入を自動防止**します。

---

## Work 10: コンテキストの切り替えを体験する

**目的**: 3つの作業モードの違いを体験する

```
  指示の内容         自動選択されるモード     Claude の動作
  ──────────────   ──────────────────     ──────────────────
  「実装して」       開発モード (dev)       すぐにコードを書く
  「レビューして」   レビューモード (review)  問題点を指摘する
  「どうなってる？」  調査モード (research)   読んで説明（書かない）
```

### やること

#### Step 1: 開発モード

```
ログインボタンを実装して
```

#### Step 2: レビューモード

```
このコードをレビューして
```

#### Step 3: 調査モード

```
このプロジェクトでウォレット接続はどう実装されている？
```

#### Step 4: 明示指定

```
research context でこの機能の実装を調査して
```

### 確認ポイント

- [ ] 「実装して」→ コードを書いたか
- [ ] 「レビューして」→ 問題点を指摘したか
- [ ] 「どうなっている？」→ 説明のみでコードは書かなかったか
- [ ] 明示指定したコンテキストが適用されたか

> 作業フェーズに応じて Claude の動作を最適化できます。

---

## Work 11: その他のコマンドを体験する

**目的**: 応用コマンドを体験する

```
  /test-coverage       カバレッジ分析（80%以上が目標）
  /refactor-clean      不要コード検出・削除提案
  /build-fix           ビルドエラーの原因特定・修正
```

### やること

```
/test-coverage
/refactor-clean
/build-fix          ← ビルドエラーがある場合
```

### 確認ポイント

- [ ] `/test-coverage` でカバレッジが表示されたか
- [ ] `/refactor-clean` で不要コードが検出されたか
- [ ] `/build-fix` でビルドエラーが修正されたか（エラーがある場合）

---

## 全体のまとめ

```
  ┌──────────────────────────────────────────────────────────────┐
  │                      学んだことの全体像                        │
  │                                                              │
  │   Work    学んだこと                     使った機能            │
  │   ────   ──────────────────────        ─────────────────     │
  │    1     コードの前に計画を立てる         /plan, planner       │
  │    2     テストを先に書く(ユニット)       /tdd, tdd-guide      │
  │    3     コミット前にレビューする         /code-review, rules  │
  │   ★4     Playwright E2E + TDD          Playwright, RED→GREEN │
  │    5     ブラウザを直接操作              Playwright MCP       │
  │    6     最新ドキュメントを取得           Context7 MCP         │
  │    7     専門エージェント使い分け         agents               │
  │    8     ルールの自動適用               rules/security.md     │
  │    9     フックの自動実行               hooks                 │
  │   10     コンテキストでモード切替         contexts              │
  │   11     応用コマンド                   /test-coverage 等     │
  │                                                              │
  └──────────────────────────────────────────────────────────────┘

  カバーした機能:
  ✓ スラッシュコマンド  (Work 1, 11)
  ✓ エージェント       (Work 7)
  ✓ ルール            (Work 8)
  ✓ フック            (Work 9)
  ✓ MCP              (Work 5, 6)
  ✓ コンテキスト       (Work 10)
  ✓ TDDワークフロー    (Work 2, 4)
```

---

## コンテキストウィンドウの管理

```
  ⚠ MCP を入れすぎると使える記憶容量が減る！

  MCP なし:  ████████████████████████  200k
  MCP 10個:  ████████████████░░░░░░░░  150k
  MCP 30個:  ████████░░░░░░░░░░░░░░░░   70k  ← 危険！

  推奨: プロジェクトごとに 10個以下、ツールは 80個以下
  確認: /mcp コマンドで現在の状態を確認
```

---

## ワークの進め方

```
  推奨順序
  ════════

  基本ワーク（1-7）を先に ──→ 追加ワーク（8-11）へ

  時間がない場合は Work 1, 2, 4 だけでも OK
  （計画 → TDD → Playwright E2E+TDD で核心を体験）
```

---

## 次のステップ

ワークを完了したら：

1. **自分のプロジェクトに適用**: `cp -r .claude/ ~/your-project/.claude/`
2. **カスタムルールを追加**: `.claude/rules/` にプロジェクト固有のルールを追加
3. **スキルを作成**: `/skill-create` でプロジェクトのパターンをスキル化
4. **フックをカスタマイズ**: `.claude/settings.local.json` でフックを調整

---

## 参考リンク

- [Guide.md（詳細リファレンス）](./Guide.md)
- [everything-claude-code リポジトリ](https://github.com/affaan-m/everything-claude-code)

---
